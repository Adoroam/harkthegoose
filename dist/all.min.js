function validateEmail(email){var re=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return re.test(email)}var app=angular.module("app",["ngRoute","ngCookies"]);app.factory("users",function($http){var jsondata={get:function(){if(!promise){var promise=$http.post("/dXFEjNz6GgyKzpp339eX").success(function(response){return response});return promise}}};return jsondata}),app.controller("indexCtrl",["$scope","users","$cookies",function($scope,users,$cookies){users.get().then(function(d){var userlist=d.data,cUser=$cookies.get("user");if(cUser){var exists=!1;for(x in userlist)userlist[x]._id==cUser&&(exists=userlist[x]);$scope.user=exists}})}]),app.controller("navCtrl",function($scope){$scope.navlist=[{name:"home",page:"/#/home",active:!0},{name:"admin",page:"/#/admin",active:!1},{name:"login",page:"/#/login",active:!1},{name:"account",page:"/#/account",active:!1}],$scope.active=function(index){for(x in $scope.navlist)$scope.navlist[x].active=!1;$scope.navlist[index].active=!0}}),app.controller("homeCtrl",["$scope","$route","$routeParams","$cookies","users",function($scope,$route,$routeParams,$cookies,users){this.name="homeCtrl",this.$route=$route,this.$routeParams=$routeParams,$scope.sent=$cookies.get("sent"),$cookies.remove("sent"),$scope.clientEmail="",$scope.clientName="",$scope.validEmail="has-feedback",$scope.validName="has-feedback",$scope.validate=function(type){if("e"==type){var x=$scope.clientEmail;validateEmail(x)?$scope.validEmail="has-success":""==x?$scope.validEmail="has-feedback":$scope.validEmail="has-error"}if("n"==type){var x=$scope.clientName;""==x?$scope.validName="has-feedback":x.length<3?$scope.validName="has-error":x.length>=50?$scope.validName="has-error":$scope.validName="has-success"}},$scope.submitStatus=function(){return"has-success"==$scope.validEmail&&"has-success"==$scope.validName?"":"disabled"}}]),app.controller("pOneCtrl",["$scope","$routeParams","users",function($scope,$routeParams,users){this.name="pOneCtrl",this.params=$routeParams,users.get().then(function(d){$scope.userlist=d.data}),$scope.searchText=""}]),app.controller("pTwoCtrl",["$scope","$routeParams",function($scope,$routeParams){this.name="pTwoCtrl",this.params=$routeParams,$scope.loginEmail="",$scope.loginPass="",$scope.validEmail="has-feedback",$scope.validPass="has-feedback",$scope.messagePass="",$scope.signup={fb:"btn-default",toggle:!1,header:"Login",postTo:"/login"},$scope.signUp=function(){"btn-default"==$scope.signup.fb?($scope.signup.fb="btn-success",$scope.signup.toggle=!0,$scope.signup.header="Sign Up",$scope.signup.postTo="/signup"):($scope.signup.fb="btn-default",$scope.signup.toggle=!1,$scope.signup.header="Login",$scope.signup.postTo="/login")},$scope.validate=function(type){if("e"==type){var x=$scope.loginEmail;validateEmail(x)?$scope.validEmail="has-success":""==x?$scope.validEmail="has-feedback":$scope.validEmail="has-warning"}if("n"==type){var x=$scope.loginPass;""==x?($scope.validPass="has-feedback",$scope.messagePass=""):x.length<=8?($scope.validPass="has-warning",$scope.messagePass="password must be at least 8 characters"):x.length>=50?($scope.validPass="has-warning",$scope.messagePass="password must be less than 50 characters"):($scope.validPass="has-success",$scope.messagePass="")}},$scope.submitStatus=function(){return"has-success"==$scope.validEmail&&"has-success"==$scope.validPass?"":"disabled"}}]),app.controller("accountCtrl",["$scope","$route","$routeParams",function($scope,$route,$routeParams){this.name="accountCtrl",this.$route=$route,this.$routeParams=$routeParams,$scope.acct=[{title:"Full Name",type:"text",id:"uName",fb:"has-feedback",ph:"Full Name",model:$scope.user.name,editState:"Edit"},{title:"Email Address",type:"text",id:"uEmail",fb:"has-feedback",ph:"Email",model:$scope.user.email,editState:"Edit"},{title:"Password",type:"password",id:"uPass",fb:"has-feedback",ph:"Password",model:$scope.user.password,editState:"Reset Password"},{title:"Signup Date",type:"text",id:"uDate",fb:"has-feedback",ph:"",model:$scope.user.signup,editState:""}]}]),app.directive("navigation",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/navigation.html"}}),app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"templates/home.html",controller:"homeCtrl",controllerAs:"home"}).when("/home",{redirectTo:"/"}).when("/admin",{templateUrl:"templates/admin.html",controller:"pOneCtrl",controllerAs:"pOne"}).when("/login",{templateUrl:"templates/login.html",controller:"pTwoCtrl",controllerAs:"pTwo"}).when("/account",{templateUrl:"templates/account.html",controller:"accountCtrl",controllerAs:"account"}).otherwise({redirectTo:"/"})}]);